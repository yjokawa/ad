自作ポテンショスタットで電気化学測定を始めてみよう！

はじめに
　本会大会等に参加されたことのある方は実感されていることと思うが，電気化学は非常に裾野の広い分野である．そして，電気化学を本業としない研究者・技術者の方でも電気化学計測を行なっていたり，あるいはこれから行なってみたいと考えている場合も多いと思われる．
　電気化学の計測法は多岐にわたるが，やはりポテンショスタット (potentiostat, PS) なしでは電気化学の実験は極めて限られたものしか行えない．しかし，市販の機器は計測系としては比較的安価な部類になるのかもしれないが，絶対的にはそれなりの価格になる．したがって，次のような場合には導入コストがネックになる場合はあるだろう．
1) 新たに電気化学計測を始めたい
2) 複数の電気化学システムを同時並行で使いたい
　1) の場合，電気化学システムを現有していない研究現場では，どこかに借りに行くとかレンタルするいうこともあるだろう．2) は，大学や高専のような教育現場では，実習用に複数のセットがほしいという状況がある．また，開発現場でも複数の条件を同時並行で検証したいということもあるかもしれない．
　筆者は主に教育用の実習教材として，電気化学システムを安価に，かつある程度の数使えるようにしたいという考えから，比較的容易に自作できる PS を設計・製作し，学部3年次の学生実験に導入した．この PS 製作については数年前から web で公開しているのだが，お問い合わせをいただいたり，試しに作ってみましたというお話を伺ったりすることがあり，一定のニーズがあることがわかる．本稿もそのような経緯から編集委員会よりお話をいただき，執筆することになったものである．
　PS の動作原理や自作法については，過去にも本誌を含めて優れた解説がいくつも書かれている．実際，PS は原理的な回路に限定すれば，電子工作としてもそれほど難しいものではない．しかし，実際に自作 PS を使って電気化学計測を行なってみた，という話は意外に耳にしないように思われる．ここには，PS の製作だけではなく，その制御と記録をどうするか，という問題があるからだろうと考えている．
　若い読者はご存じないかもしれないが，昔から電気化学には「三種の神器」と呼ばれるものがある．ポテンショスタット (PS)，ファンクションジェネレータ (function generator，FG)，そしてペンレコーダである．PS を自作することはよく紹介されていても，残り二つについては言及されることがあまりなかった．それは PS に比べて自作したりすることがかなり難しかったからだろう．PS だけ安価に自作できても，標準的な電気化学計測のあれこれを実施するところまでもっていくには別のハードルがあった．
　ペンレコーダは機械式の電気信号記録装置なのだが，若い読者は見たことさえないかもしれない．その動きはメカ好きをわくわくさせるものがあり，非常に強力な記録装置として長年活躍したのだが，その価格は安くはなく，導入の敷居はかなり高かった．
　FG は任意波形発生器 (arbitrary wave generator，AWG) などとも呼ぶが，電気化学計測に必要な制御信号を発生する装置で，この信号に基づいて PS を介して電極電位を制御する．同時に PS はその際に測定系に流れる電流を測る．電気化学で使う信号波形を，条件を目的の計測に合わせて自由かつ正確に設定しつつアナログ回路で発生させるのは，意外に難しい．
　こういった事情があるため，かつては PS の自作はできても実際の実験等に活用される場合は意外に少なかったと思われる．しかし，現在では安価で高性能な AD 変換器 (analog-to-digital converter, ADC) や DA 変換器 (digital-to-analog converter，DAC) が容易に入手できる．ADC はアナログ信号をデジタルデータに変換するもので，その結果は通常 PC にデータとして取り込まれる．DAC はデジタルデータからアナログ信号を作るもので，PC 上で自由に作った文字通りの「任意波形」を作り出すことができる．PC 本体も安くなった．とくに今回のようなケースでは PC に要求される性能は高くない．PC と ADC/DAC を用いれば，これまで大きなハードルであった，制御信号生成と測定結果の記録の問題はクリアできるようになった．つまり，自作した PS を実用するためのハードルはかなり下がったといえるだろう．
　とはいえ，電気化学計測をこれから始めたいという場合などは，どういう ADC/DAC をどう使ったらいいのかというところまで紹介してほしい場合は多いだろう．筆者の web 記事に興味を持った方からは，「実際に使えるシステムまでセットで紹介されていることは貴重」というご意見をいただいたこともある．
　前口上が長くなったが，本稿は実際に実験に取りかかれるようなセットを，自作 PS と市販の ADC/DAC モジュールで構築する方法について紹介する．できるだけハードルを下げるため，自作するのは PS のみとし，その仕様や性能も欲張らずに，確実に製作できるようなものを目指した．そのほかは市販の ADC/DAC モジュールと標準ソフトを基本として，システムを構築する．腕に覚えのある方は，ぜひ改良を施してほしい．
　PC はもちろん必要なのだが，筆者の試した範囲では Windows 10 が動くレベルであればかなり古い PC でも問題なく計測が行えた．Windows 10 のサポートの終了により，とくにネット接続した形では使いにくくなった古い PC をスタンドアローンで使うこともできる．今回紹介するシステムは Linux でも動くので，すでに使われなくなった古い PC を流用することもできるだろう．もちろん，ふだん使っているノート PC に制御ソフトを入れて，実験室に持ち込んでもよい．PC との接続は USB ケーブル一本である．

Analog Discovery と WaveForms
　ADC も DAC も多数の市販品があるが，ここでは Digilent 社の Analog Discovery (AD) を選択した．AD は ADC と DAC の機能を併せ持っているので，制御信号生成と記録を 1台で行なうことができる．現行品は 3代目の Analog Discovery 3 (AD3) であるが，初代 Analog Discovery でも，2代目の Analog Discovery 2 でも今回の用途では同様に使用できる．初代は実売で 2万円台と驚異的な低価格だったが，現行の AD3 は (とくに個人で使うには) なかなかの価格になってしまった．それでも性能を考えれば十分に低価格といえる．　
　WaveForms は AD の標準制御ソフトウェア (Windows，Mac，Linux に対応) であり，無償で使用できる．本稿では AD を使うことを前提にしているが，その理由の一つがこの WaveForms である．WaveForms は基本的な記録や信号生成だけでなく，電気化学計測にも有用なインピーダンス解析等の機能をもっており，その利用価値は非常に高い．
　AD と WaveForms の組み合わせは今回紹介する基本測定以外にもアイディア次第でさまざまに利用できると思う．


OP アンプ：ポテンショスタットのキーパーツ
　OP アンプ (operational ammplifier. 演算増幅器) はアナログ動作する PS のキーとなるパーツである．安価で高性能な OP アンプが使えるようになって，PS の回路は非常にシンプルになった．OP アンプがどういうものか，またそれをどのように使って PS にするかについては詳しい解説がこれまでにもいくつも書かれている．ぜひそれらも参照していただきたい．
　OP アンプはアナログの電気信号を扱う上で非常に便利な道具で，比較的簡単な回路でさまざまな機能を実現できる．もちろん，要求仕様が上がれば相応の使いこなし上の技術が必要であるが，過度の性能を求めなければ，実用性のある回路を比較的容易に実現できる．筆者の例を挙げると，無抵抗電流計を作って，ある反応の電気化学モデルセルに対して微小な短絡電流の直接測定に利用したりしている．
　OP アンプの細かな電気的な内部動作を理解する必要は当面ないが，ユーザ目線で OP アンプの動作を理解するためには，OP アンプのもついくつかの特徴を押さえることが重要であろう．OP アンプには二つの入力端子 (反転入力 V+ と非反転入力 V-) 端子と，一つの出力端子 (Vout) がある．
　　1. 入力電圧，出力電圧とも，基準電圧線 (GND，通常，電源の中点電圧) を基準に印加・出力される (Fig. )．
　　2. 二つの入力端子の電位差 (V+ - V-) が，非常に大きく増幅された電圧が出力端子に現れる (Vout = A0 × (V+ - V-)，A0 は開路利得 open loop gain と呼ばれ，通常，100 dB = 10^5 倍 以上あることが多い )
　　3. 出力端子に負荷がつながれても出力電圧は変化せず，負荷にはその出力電圧で規定される電流が流れる
　　4. 二つの入力端子に電圧を入力するとき，電流はアンプには流れない
　そして，通常は出力端子と反転入力端子は何らかの形で接続された形で使用される．このときの性質として，次が重要である．，
　　5. V+ 端子と V- 端子の電位差はほとんど 0 になる
　以上は，理想 OP アンプの場合であり，現実の OP アンプでは一定の「ずれ」が生じるため，回路設計上はその差を考慮する必要がある．しかし，回路の動作原理を理解する上では，当面，上記の性質を受け入れてしまおう．
　5 について，実際には二つの入力端子の間にはごくわずかに電位差があり，これが A0 倍増幅されて出力になるが，A0 = 10^5 であれば出力が 10 V であっても，電位差はは 0.1 mV に過ぎず，ほとんど無視できることになる．これは仮想短絡 (imaginary short) と呼ばれる性質で，PS の動作を理解する上でも重要な性質になる．
　

ポテンショスタットの動作
　ポテンショスタットは，作用極 (working electrode，WE) と参照極 (reference electrode，RE) の間の電位差を所定値に保つよう，対極 (counter electrode，CE) と WE との間に電位差を印加し，その際の電流がモニタできるような装置である．
　電位制御のための基本回路は OP アンプひとつで構成できる (Fig. )．この回路がどのように動作するかを簡単に見てみよう．






ユニバーサル基板で作るのはハードルが高い
プリント基板の自作も初心者にはハードルが高い
現在は，安価に製造してもらえるが，基板データを作るのはハードルが高い
-> データを公開しているので，一応のものはそれで作れる
ケース加工も結構なハードル
-> 基板だけで完成した形で動く
   ケース組み込みは可能
   金属ケースでなくても -> 計測系自体が拾うノイズの方がよほど問題


ポテンショスタットの自作
　多くの文献
　作ること自体はさほど難しくない
　制御，記録の方がむしろ高ハードル

制御と記録 - FG とレコーダ
　古典的にはアナログのFG + ペンレコ
　過去の記事等の PS は実用レベルの性能がある
　制御・記録がネック
　デジタル技術の進歩，PC の普及 -> 安価な汎用機器化
  AD / DA コンバータ -> 安価，高性能，優秀な制御ソフト
　Analog Discovery のメリット
　　初代から見るとかなり値上がりしたが，それでも5〜6万円程度で実用的なレベルの性能をもつ AD / DA コンバータと優秀な制御解析ソフトが手に入る
　
本稿
　ポテンショスタットの原理
　自作法
　Analog Discovery 拡張基板としての PS の製作例
　　教育用途
　　　電気化学の基礎教育 (学生，未経験技術者等)
　　　PS の電気的動作について，ブラックボックスから一歩進んだ理解
　　並列的なスクリーニング
　　実験室でのその場利用や予備検討のための(気軽な？)測定



AD 以外の ADC/DAC と組み合わせるには
　コネクタに接続するインターフェースキット/アダプタ (要試作)
　　40ピンオスから陸式や BNC への変換
　　　差動入力の必要 (Ch2 が逆接になるため) or Ch2 は記録後に数値の符号反転


Raspberry Pi などの SBC との組み合わせ
　Analog Discovery の Linux 版が使える可能性あり (要確認)
　Raspberry Pi を使えるようにするとかの，また別のハードルがある
　ディスプレイやキーボード等の操作系は別に必要なので，テーブル上にある程度の場所が必要になるのは同じ．
　型落ちのノートPCの方が扱いやすいかもしれない
　読者各位で検討されたい
ADC / DAC 部分も自作する
　いずれも安価で高性能なモジュールや LSI がある
　ソフトを自分で用意する必要がある
　　 -> 電気化学に使いやすい使用例はまずみつからない

